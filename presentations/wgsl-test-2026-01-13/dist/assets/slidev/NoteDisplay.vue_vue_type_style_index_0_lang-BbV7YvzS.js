import{d as H,z as C,f,n as p,g as c,C as T,F as E,t as h,ag as z,ai as I,ah as F,k as A,o as k,r as B,E as P,L as R,D as V,p as K}from"../modules/vue-0g6bI1HP.js";import{o as j,r as q,C as N,_ as U}from"../index-PE7s9owU.js";const X=["title"],G={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},J={"text-primary":""},O={op50:"","text-sm":""},Q={key:1,op50:"","flex-auto":"",pl1:""},W={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},Y=["min","max"],Z=H({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(u){const v=u,t=C(()=>v.clicksContext.total),x=C(()=>j(0,v.clicksContext.clicksStart,t.value)),m=C(()=>t.value-x.value+1),a=C({get(){return v.clicksContext.current>t.value?-1:v.clicksContext.current},set(d){v.clicksContext.current=d}}),w=C(()=>q(x.value,t.value+1));function g(){v.readonly||(a.value<0||a.value>t.value)&&(a.value=0)}return(d,n)=>(k(),f("div",{class:p(["flex gap-1 items-center select-none",m.value&&v.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${m.value}`},[c("div",G,[n[4]||(n[4]=c("div",{class:"i-carbon:cursor-1 text-sm op50"},null,-1)),a.value>=0&&a.value!==T(N)&&u.active?(k(),f(E,{key:0},[n[2]||(n[2]=c("div",{"flex-auto":""},null,-1)),c("span",J,h(a.value),1),n[3]||(n[3]=c("span",{op25:"","text-sm":""},"/",-1)),c("span",O,h(t.value),1)],64)):(k(),f("div",Q,h(t.value),1))]),c("div",W,[(k(!0),f(E,null,I(w.value,l=>(k(),f("div",{key:l,border:"y main","of-hidden":"",relative:"",class:p([l===0?"rounded-l border-l":"",l===t.value?"rounded-r border-r":""]),style:A({width:m.value>0?`${1/m.value*100}%`:"100%"})},[c("div",{absolute:"","inset-0":"",class:p(l<=a.value&&u.active?"bg-primary op15":"")},null,2),c("div",{class:p([+l==+a.value&&u.active?"text-primary font-bold op100 border-primary":"op30 border-main",l===0?"rounded-l":"",l===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},h(l),3)],6))),128)),z(c("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>a.value=l),class:p(["range",u.readonly?"pointer-events-none":""]),type:"range",min:x.value,max:t.value,step:1,absolute:"","inset-0":"","z-label":"",op0:"",style:A({"--thumb-width":`${1/(m.value+1)*100}%`}),onMousedown:g,onFocus:n[1]||(n[1]=l=>{var y;return(y=l.currentTarget)==null?void 0:y.blur()})},null,46,Y),[[F,a.value]])])],10,X))}}),se=U(Z,[["__scopeId","data-v-e2606027"]]),ee=["innerHTML"],te=["textContent"],le=["textContent"],M="slidev-note-fade",b="slidev-note-click-mark",ae=H({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(u,{emit:v}){const t=u,x=v,m=C(()=>{var d;return t.clicksContext!=null&&((d=t.noteHtml)==null?void 0:d.includes("slidev-note-click-mark"))}),a=B(null);function w(){var $,D;if(!a.value||!m.value)return;const d=Array.from(a.value.querySelectorAll(`.${b}`)),n=new Map,l=new Map;let y=0;for(const i of d){const s=Number(i.dataset.clicks);n.set(i,s);let o=i,e=i.parentElement;for(;e&&o!==a.value;)l.has(e)||l.set(e,[[null,y]]),l.get(e).push([o,s]),o=e,e=e.parentElement;y=s}const S=new Map;for(const[i,s]of l){let o=!1,e=0;for(const r of Array.from(i.childNodes)){let _=!1;for(;r===(($=s[e+1])==null?void 0:$[0]);)_=!0,e++;if(_)continue;let L=r;if(r.nodeType===3){if(!((D=r.textContent)!=null&&D.trim()))continue;L=document.createElement("span"),L.textContent=r.textContent,i.insertBefore(L,r),r.remove()}o||(o=e===0),S.set(L,s[e][1])}o||(s[0][1]=-1)}return i=>{const s=t.highlight;for(const[o,e]of l)o.classList.toggle(M,s&&!e.some(([r,_])=>_===i));for(const[o,e]of S)o.classList.toggle(M,s&&e!==i);for(const[o,e]of n)o.classList.remove(M),o.classList.toggle(`${b}-past`,s&&e<i),o.classList.toggle(`${b}-active`,s&&e===i),o.classList.toggle(`${b}-next`,s&&e===i+1),o.classList.toggle(`${b}-future`,s&&e>i+1),o.ondblclick=s?r=>{x("markerDblclick",r,e),!r.defaultPrevented&&(t.clicksContext.current=e,r.stopPropagation(),r.stopImmediatePropagation())}:null,o.onclick=s?r=>{x("markerClick",r,e)}:null,s&&t.autoScroll&&e===i&&o.scrollIntoView({block:"center",behavior:"smooth"})}}const g=B();return P(()=>[t.noteHtml,t.highlight],()=>{K(()=>{g.value=w()})},{immediate:!0}),R(()=>{w()}),V(()=>{var n,l;const d=((n=t.clicksContext)==null?void 0:n.current)??N;(l=g.value)==null||l.call(g,d)}),(d,n)=>u.noteHtml?(k(),f("div",{key:0,ref_key:"noteDisplay",ref:a,class:p(["prose overflow-auto outline-none slidev-note",[t.class,m.value?"slidev-note-with-clicks":""]]),innerHTML:u.noteHtml},null,10,ee)):u.note?(k(),f("div",{key:1,class:p(["prose overflow-auto outline-none slidev-note",t.class])},[c("p",{textContent:h(u.note)},null,8,te)],2)):(k(),f("div",{key:2,class:p(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[c("p",{textContent:h(t.placeholder||"No notes.")},null,8,le)],2))}});export{se as C,ae as _};
